var data={},cases_line={},arrivals_line={},lines=[cases_line,arrivals_line],cases_data=[],arrivals_data=[],layout={margin:{t:10}},SLICE_90=0,SLICE_60=29,SLICE_30=59,slice=SLICE_90,selected_days_btn=document.getElementById("90btn"),selected_island_btn=document.getElementById("totalbtn");function fetchData(url,callback){var request=new XMLHttpRequest;request.open("GET",url,!0),request.onload=function(){var responsedata;200<=this.status&&this.status<400&&(responsedata=JSON.parse(this.response),callback(responsedata))},request.onerror=function(){},request.send()}function begin(responsedata){data=responsedata,cases_line.x=data.dates,cases_line.y=data.total_cases,cases_line.name="New Cases",arrivals_line.x=data.dates,arrivals_line.y=data.total_arrivals,arrivals_line.name="Arrivals",cases_data=data.total_cases,arrivals_data=data.total_arrivals,Plotly.newPlot(document.getElementById("chart"),lines,layout,{displayModeBar:!1}),document.getElementById("datespan").innerHTML=data.process_time}function redraw(){Plotly.react(document.getElementById("chart"),lines,layout,{displayModeBar:!1})}function switchDays(elem){switch(selected_days_btn.classList.remove("selected"),elem.classList.add("selected"),(selected_days_btn=elem).id){case"30btn":slice=SLICE_30;break;case"60btn":slice=SLICE_60;break;case"90btn":slice=SLICE_90}cases_line.x=data.dates.slice(slice),cases_line.y=cases_data.slice(slice),arrivals_line.x=data.dates.slice(slice),arrivals_line.y=arrivals_data.slice(slice),redraw()}function switchIsland(elem){switch(selected_island_btn.classList.remove("selected"),elem.classList.add("selected"),(selected_island_btn=elem).id){case"totalbtn":cases_data=data.total_cases,arrivals_data=data.total_arrivals,cases_line.y=data.total_cases.slice(slice),arrivals_line.y=data.total_arrivals.slice(slice),redraw();break;case"oahubtn":cases_data=data.hnl_cases,arrivals_data=data.hnl_arrivals,cases_line.y=data.hnl_cases.slice(slice),arrivals_line.y=data.hnl_arrivals.slice(slice),redraw();break;case"mauibtn":cases_data=data.mau_cases,arrivals_data=data.mau_arrivals,cases_line.y=data.mau_cases.slice(slice),arrivals_line.y=data.mau_arrivals.slice(slice),redraw();break;case"hawaiibtn":cases_data=data.bi_cases,arrivals_data=data.bi_arrivals,cases_line.y=data.bi_cases.slice(slice),arrivals_line.y=data.bi_arrivals.slice(slice),redraw();break;case"kauaibtn":cases_data=data.kau_cases,arrivals_data=data.kau_arrivals,cases_line.y=data.kau_cases.slice(slice),arrivals_line.y=data.kau_arrivals.slice(slice),redraw()}}fetchData("https://raw.githubusercontent.com/hoedward/hawaiicovidchart/master/90_merged.json",begin);