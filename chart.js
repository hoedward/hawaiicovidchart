var data={},cases_line={},arrivals_line={},lines=[cases_line,arrivals_line],cases_data=[],arrivals_data=[],layout={margin:{t:10}},SLICE_90=0,SLICE_60=29,SLICE_30=59,slice=SLICE_90,selected_days_btn=document.getElementById("90btn"),selected_island_btn=document.getElementById("totalbtn");function fetchData(a,e){var s=new XMLHttpRequest;s.open("GET",a,!0),s.onload=function(){var a;200<=this.status&&this.status<400&&(a=JSON.parse(this.response),e(a))},s.onerror=function(){},s.send()}function begin(a){data=a,cases_line.x=data.i,cases_line.y=data.l,cases_line.name="New Cases",arrivals_line.x=data.i,arrivals_line.y=data._,arrivals_line.name="Arrivals",cases_data=data.l,arrivals_data=data._,Plotly.newPlot(document.getElementById("chart"),lines,layout,{o:!1}),document.getElementById("datespan").innerHTML=data.v}function redraw(){Plotly.react(document.getElementById("chart"),lines,layout,{o:!1})}function switchDays(a){switch(selected_days_btn.classList.remove("selected"),a.classList.add("selected"),(selected_days_btn=a).id){case"30btn":slice=SLICE_30;break;case"60btn":slice=SLICE_60;break;case"90btn":slice=SLICE_90}cases_line.x=data.i.slice(slice),cases_line.y=cases_data.slice(slice),arrivals_line.x=data.i.slice(slice),arrivals_line.y=arrivals_data.slice(slice),redraw()}function switchIsland(a){switch(selected_island_btn.classList.remove("selected"),a.classList.add("selected"),(selected_island_btn=a).id){case"totalbtn":cases_data=data.l,arrivals_data=data._,cases_line.y=data.l.slice(slice),arrivals_line.y=data._.slice(slice),redraw();break;case"oahubtn":cases_data=data.u,arrivals_data=data.h,cases_line.y=data.u.slice(slice),arrivals_line.y=data.h.slice(slice),redraw();break;case"mauibtn":cases_data=data.m,arrivals_data=data.C,cases_line.y=data.m.slice(slice),arrivals_line.y=data.C.slice(slice),redraw();break;case"hawaiibtn":cases_data=data.I,arrivals_data=data.L,cases_line.y=data.I.slice(slice),arrivals_line.y=data.L.slice(slice),redraw();break;case"kauaibtn":cases_data=data.S,arrivals_data=data.k,cases_line.y=data.S.slice(slice),arrivals_line.y=data.k.slice(slice),redraw()}}fetchData("https://raw.githubusercontent.com/hoedward/hawaiicovidchart/master/90_merged.json",begin);
